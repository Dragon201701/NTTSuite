## HLS SP synthesis script
## Generated for stage extract
## Vivado mode is Non-project

# Reporting settings
puts "-- Requested 4 fractional digits for design 'inPlaceNTT_DIF_precomp' timing"
puts "-- Requested 4 fractional digits for design 'inPlaceNTT_DIF_precomp' capacitance"
puts "-- Characterization mode: p2p "

puts "-- Synthesis Timing report: '/home/yl7897/NTT_Xilinx/Catapult/inplaceNTT_DIF_precomp_md/Catapult/inPlaceNTT_DIF_precomp.v5/vivado_v/timing_summary_synth.rpt' "
puts "-- Synthesis Utilization report: '/home/yl7897/NTT_Xilinx/Catapult/inplaceNTT_DIF_precomp_md/Catapult/inPlaceNTT_DIF_precomp.v5/vivado_v/utilization_synth.rpt' "

# Environment variable settings
global env
set CATAPULT_HOME "/opt/mentorgraphics/Catapult_10.5c/Mgc_home"
## Set the variable for file path prefixing 
set RTL_TOOL_SCRIPT_DIR /home/yl7897/NTT_Xilinx/Catapult/inplaceNTT_DIF_precomp_md/Catapult/inPlaceNTT_DIF_precomp.v5/vivado_v
set RTL_TOOL_SCRIPT_DIR [file dirname [file normalize [info script] ] ]
puts "-- RTL_TOOL_SCRIPT_DIR is set to '$RTL_TOOL_SCRIPT_DIR' "
# Vivado Non-Project mode script starts here
puts "==========================================="
puts "Catapult driving Vivado in Non-Project mode"
puts "==========================================="
set outputDir /home/yl7897/NTT_Xilinx/Catapult/inplaceNTT_DIF_precomp_md/Catapult/inPlaceNTT_DIF_precomp.v5/vivado_v
set outputDir $RTL_TOOL_SCRIPT_DIR
#file mkdir $outputDir
#
# STEP#1: setup design sources and constraints
#
create_project -force tcl_v
   read_verilog $CATAPULT_HOME/pkgs/siflibs/ccs_sync_in_wait_v1.v
   read_verilog $CATAPULT_HOME/pkgs/siflibs/ccs_sync_out_wait_v1.v
   read_verilog $CATAPULT_HOME/pkgs/siflibs/mgc_io_sync_v2.v
   read_verilog $CATAPULT_HOME/pkgs/siflibs/ccs_in_v1.v
   read_verilog $CATAPULT_HOME/pkgs/siflibs/mgc_out_dreg_v2.v
   read_verilog ../../td_ccore_solutions/mult_c3d87980142fdbe72da25f2460c5a41a70cb_0/rtl.v
   read_verilog ../../td_ccore_solutions/modulo_sub_f56c3138e5ca6733a13aa39bf1e29fd2635c_0/rtl.v
   read_verilog ../../td_ccore_solutions/modulo_add_1a78f3a034bed933e402bbf0ca446af860d3_0/rtl.v
   read_verilog $CATAPULT_HOME/pkgs/siflibs/mgc_shift_l_beh_v5.v
   read_verilog ../rtl.v
# set up XPM libraries for XPM-related IP like the Catapult Xilinx_FIFO
set_property XPM_LIBRARIES {XPM_CDC XPM_MEMORY XPM_FIFO} [current_project]
read_xdc $outputDir/rtl.v.xv.sdc
set_property part xcvu13p-flga2577-3-e [current_project]
#
# STEP#2: run synthesis, report utilization and timing estimates, write checkpoint design
#
synth_design   -top inPlaceNTT_DIF_precomp -part xcvu13p-flga2577-3-e -mode out_of_context  -include_dirs ""
write_checkpoint -force $outputDir/post_synth
set viv_report_dir /home/yl7897/NTT_Xilinx/Catapult/inplaceNTT_DIF_precomp_md/Catapult/inPlaceNTT_DIF_precomp.v5/vivado_v
report_utilization -file $viv_report_dir/utilization_synth.rpt
report_timing_summary -path_type summary -file $viv_report_dir/timing_summary_synth.rpt
report_timing -nworst 1 -from [all_inputs] -to [all_outputs] -file $viv_report_dir/timing_summary_synth.rpt -append
if { [llength [all_clocks] ] > 0 } {
  report_timing -nworst 1 -from [all_inputs] -to [all_clocks] -file $viv_report_dir/timing_summary_synth.rpt -append
  report_timing -nworst 1 -from [all_clocks] -to [all_clocks] -file $viv_report_dir/timing_summary_synth.rpt -append
  report_timing -nworst 1 -from [all_clocks] -to [all_outputs] -file $viv_report_dir/timing_summary_synth.rpt -append
}
if { ([info exists env(Xilinx_RUN_PNR)] && $env(Xilinx_RUN_PNR) ) || 
     ([info exists env(Xilinx_BITGEN)] && $env(Xilinx_BITGEN) ) } {
  opt_design
  place_design
  read_xdc /home/yl7897/NTT_Xilinx/Catapult/inplaceNTT_DIF_precomp_md/Catapult/inPlaceNTT_DIF_precomp.v5/vivado_v/rtl.v.xv.signoff.sdc
  phys_opt_design
  write_checkpoint -force $outputDir/post_place
  route_design
  write_checkpoint -force $outputDir/post_route
  write_verilog -force $outputDir/inPlaceNTT_DIF_precomp_impl_netlist.v -sdf_anno false
  write_xdc -no_fixed_only -force $outputDir/inPlaceNTT_DIF_precomp_impl.xdc
  if { [info exists env(Xilinx_BITGEN)] && $env(Xilinx_BITGEN) } {
    write_bitstream -force $outputDir/inPlaceNTT_DIF_precomp.bit
  }
set viv_report_dir /home/yl7897/NTT_Xilinx/Catapult/inplaceNTT_DIF_precomp_md/Catapult/inPlaceNTT_DIF_precomp.v5/vivado_v
report_utilization -file $viv_report_dir/utilization_placed.rpt
report_timing_summary -path_type summary -file $viv_report_dir/timing_summary_routed.rpt
report_timing -nworst 1 -from [all_inputs] -to [all_outputs] -file $viv_report_dir/timing_summary_routed.rpt -append
if { [llength [all_clocks] ] > 0 } {
  report_timing -nworst 1 -from [all_inputs] -to [all_clocks] -file $viv_report_dir/timing_summary_routed.rpt -append
  report_timing -nworst 1 -from [all_clocks] -to [all_clocks] -file $viv_report_dir/timing_summary_routed.rpt -append
  report_timing -nworst 1 -from [all_clocks] -to [all_outputs] -file $viv_report_dir/timing_summary_routed.rpt -append
}
}
